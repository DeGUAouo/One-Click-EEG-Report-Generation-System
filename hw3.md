### HW3
---


## 1. 系統非功能需求

| 非功能需求編號 | 非功能需求 | 非功能需求描述 |
|----------------|-------------|----------------|
| NF-001 | API 安全性 | 系統採用 JWT 驗證與權限控管（IsAuthenticated, AllowAny），確保僅授權使用者能存取 API；密碼經雜湊處理，防止明文外洩。 |
| NF-002 | API 資料完整性 | 透過 Serializer 驗證與 update_or_create() 機制，確保資料在建立與更新時的正確性與一致性，異常情況回傳適當錯誤碼（400/401/404）。 |
| NF-003 | API 效能與可擴充性 | 採用 Django REST Framework 架構與 ORM 查詢，支援分頁與快取優化，可依資料量擴充伺服器或背景任務，維持穩定效能。 |
| NF-004 | API 可維護性與可用性 | 系統以 ViewSet + Serializer 分層設計，並整合 Swagger 自動生成文件（drf_yasg），提升開發維護效率與前後端協作便利性。 |
| NF-005 | 部署安全性 | 正式環境需防止金鑰外洩與中間人攻擊，限制來源、啟用安全標頭。 |
| NF-006 | 資料庫與儲存可靠性 | 使用可持久化、可備援的 DB 與檔案儲存，並設備份/復原策略。 |
| NF-007 | 隱私與加密 | 機敏資料與檔案在靜態與傳輸過程需受保護。 |
| NF-008 | 可維運性（觀測性與資源限制） | 有效監控、錯誤追蹤與請求治理，確保穩定運行。 |

---

## 2. 系統功能需求

| 功能需求編號 | 功能需求 | 功能需求描述 |
|--------------|----------|--------------|
| F-001 | 使用者登入與權限管理 | 使用者可透過帳號密碼登入系統，系統以 JWT 驗證並依角色（醫師、技師、管理者）提供相對應權限。 |
| F-002 | 病患資料管理 | 使用者可新增、修改、刪除、搜尋病患基本資料，並維護個人 EEG 檔案與病歷。 |
| F-003 | EEG 檔案上傳與儲存 | 系統支援 EEG/MEG/ECG/iEEG 檔案上傳，自動依患者 ID 建立 BIDS 結構資料夾，供後續 AI 分析使用。 |
| F-004 | 專案資料管理 | 醫師可建立專案並指派成員（admin/write/read），用以整合病患與分析任務。 |
| F-005 | EEG 原始資料處理 | 系統可對上傳之 EEG 原始訊號進行預處理，包括濾波（Filter）、去除雜訊（Artifact Removal）、重新參考（Re-referencing）與分段（Epoching）等。 |
| F-006 | AI 模組分析 | 系統可啟動 AI 模型進行 EEG 特徵擷取（feature extraction）、時頻分析與神經網路模型（NN model）預測。 |
| F-007 | LLM 診斷報告生成 | 透過 LLM（如 Neuro-GPT）自動生成標準化 EEG 診斷報告文字內容，包含背景活動與異常分析。 |
| F-008 | 圖表與視覺化呈現 | 系統可將分析結果以長條圖、圓餅圖、折線圖或表格形式顯示，並生成 PDF/報告格式供下載。 |
| F-009 | 報告產生與儲存 | 將分析結果與圖表整合為正式報告，儲存於病患個案資料中供醫師審閱與簽署。 |
| F-010 | 分析結果通知 | 分析完成後自動發送通知（含報告內容摘要）給指定醫師或小組成員。 |
| F-011 | 操作日誌與錯誤回報 | 系統目前具備基本的錯誤回報與操作回饋機制，能在使用者操作或資料異常時回傳明確訊息。 |

---

## 3. 使用案例（表格版）

### 使用案例 UC001 — 使用者登入與權限管理
| 欄位 | 內容 |
|------|------|
| **使用案例編號** | UC001 |
| **使用案例名稱** | 使用者登入與權限管理 |
| **功能編號** | F-001、F-004、F-011 |
| **前置條件** | 使用者已註冊並具有合法帳號。 |
| **後置條件** | 登入成功後系統建立 JWT 驗證狀態並載入對應角色權限，登入與操作事件同步記錄於日誌。 |
| **基本流程** | 1. 使用者輸入帳號密碼登入系統。<br>2. 系統驗證帳密，通過後產生 JWT Token。<br>3. 依角色權限顯示可用功能模組（醫師可瀏覽報告、技師可上傳 EEG）。<br>4. 系統同時於後端記錄登入行為與狀態。 |

### 使用案例 UC002 — 病患資料與專案管理
| 欄位 | 內容 |
|------|------|
| **使用案例編號** | UC002 |
| **使用案例名稱** | 病患資料與專案管理 |
| **功能編號** | F-002、F-004、F-011 |
| **前置條件** | 使用者已登入並擁有管理或操作病患資料的權限。 |
| **後置條件** | 病患基本資料與所屬專案正確更新，操作歷程被完整記錄。 |
| **基本流程** | 1. 使用者開啟「病患管理」模組。<br>2. 系統顯示現有病患清單並提供搜尋。<br>3. 醫師可建立新專案並指派技師與病患。<br>4. 使用者可新增、修改、刪除病患資料。<br>5. 系統驗證後寫入資料庫並記錄操作行為。 |

### 使用案例 UC003 — EEG 檔案上傳與前處理
| 欄位 | 內容 |
|------|------|
| **使用案例編號** | UC003 |
| **使用案例名稱** | EEG 檔案上傳與前處理 |
| **功能編號** | F-003、F-005 |
| **前置條件** | 使用者已登入且選擇特定病患或專案。 |
| **後置條件** | EEG 檔案成功上傳並完成預處理（濾波、去雜訊、重參考、分段）。 |
| **基本流程** | 1. 使用者於上傳介面選取 EEG 檔案。<br>2. 系統驗證格式並依病患 ID 建立 BIDS 結構資料夾。<br>3. 執行自動化預處理流程。<br>4. 儲存結果並回饋上傳成功訊息。 |

### 使用案例 UC004 — AI 模組分析與特徵擷取
| 欄位 | 內容 |
|------|------|
| **使用案例編號** | UC004 |
| **使用案例名稱** | AI 模組分析與特徵擷取 |
| **功能編號** | F-005、F-006 |
| **前置條件** | EEG 檔案已完成上傳與前處理。 |
| **後置條件** | AI 模組完成特徵擷取與模型預測，輸出結構化結果供後續使用。 |
| **基本流程** | 1. 使用者選擇分析模型並啟動 AI 任務。<br>2. 系統執行特徵擷取與時頻分析。<br>3. 模型預測結果與統計數據儲存於資料庫。<br>4. 系統回傳任務完成訊息。 |

### 使用案例 UC005 — LLM 自動生成診斷報告
| 欄位 | 內容 |
|------|------|
| **使用案例編號** | UC005 |
| **使用案例名稱** | LLM 自動生成診斷報告 |
| **功能編號** | F-006、F-007、F-009 |
| **前置條件** | AI 模型分析完成並已產出 EEG 特徵與結果。 |
| **後置條件** | 系統生成標準化 EEG 診斷報告，含背景活動與異常分析段落。 |
| **基本流程** | 1. 系統載入分析結果與特徵。<br>2. LLM 生成報告草稿。<br>3. 醫師可於介面審閱與修訂內容。<br>4. 儲存正式報告並綁定病患紀錄。 |

### 使用案例 UC006 — 圖表與視覺化呈現
| 欄位 | 內容 |
|------|------|
| **使用案例編號** | UC006 |
| **使用案例名稱** | 圖表與視覺化呈現 |
| **功能編號** | F-008、F-009 |
| **前置條件** | AI 模組分析與報告文字內容已生成。 |
| **後置條件** | 系統成功生成圖表或表格並整合於 PDF 報告中。 |
| **基本流程** | 1. 系統載入 EEG 分析數據。<br>2. 生成長條圖、折線圖、圓餅圖或統計表。<br>3. 醫師可下載 PDF 或預覽報告。 |

### 使用案例 UC007 — 報告產生與儲存
| 欄位 | 內容 |
|------|------|
| **使用案例編號** | UC007 |
| **使用案例名稱** | 報告產生與儲存 |
| **功能編號** | F-007、F-008、F-009 |
| **前置條件** | 報告文字與圖表皆已生成。 |
| **後置條件** | 報告儲存於資料庫並綁定病患個案，可供審閱與下載。 |
| **基本流程** | 1. 系統整合 LLM 生成文字與圖表。<br>2. 轉換為正式 PDF/DOCX 格式。<br>3. 儲存至病患個案資料夾。<br>4. 醫師可簽章或下載存檔。 |

### 使用案例 UC008 — 分析結果通知
| 欄位 | 內容 |
|------|------|
| **使用案例編號** | UC008 |
| **使用案例名稱** | 分析結果通知 |
| **功能編號** | F-010、F-009 |
| **前置條件** | AI 分析與報告產生流程皆完成。 |
| **後置條件** | 系統自動通知指定醫師或小組成員。 |
| **基本流程** | 1. 系統偵測任務完成事件。<br>2. 生成通知內容與報告摘要。<br>3. 發送至醫師信箱或系統通知中心。 |

### 使用案例 UC009 — 操作日誌與錯誤回報
| 欄位 | 內容 |
|------|------|
| **使用案例編號** | UC009 |
| **使用案例名稱** | 操作日誌與錯誤回報 |
| **功能編號** | F-011 |
| **前置條件** | 使用者已登入並執行操作。 |
| **後置條件** | 系統自動儲存操作與錯誤事件記錄，供管理者查閱。 |
| **基本流程** | 1. 系統即時監控使用者操作。<br>2. 發生錯誤時自動紀錄時間、模組與原因。<br>3. 顯示錯誤提示並上報伺服器。<br>4. 管理者可於後台查閱與匯出報告。 |
